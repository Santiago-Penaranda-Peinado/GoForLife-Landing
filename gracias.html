<!DOCTYPE html>
<html lang="es" class="h-full">
<head>
    <!-- GTM removido: se mantiene gtag directo -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17575125653"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      // Configuramos ambas cuentas limpiamente
    gtag('config', 'AW-17575125653'); // Cuenta principal activa
    // Cuenta vieja desactivada para prevenir conteo doble.
    // Para reactivar eliminar comentario:
    // gtag('config', 'AW-10959842291');

      // --- LÓGICA ANTI-DUPLICADOS (Refresh) ---
      const params = new URLSearchParams(window.location.search);
      
      if (params.get('estado') === 'exito') {
          // Protección adicional: evita doble disparo si el usuario regresa con bfcache
          if (!sessionStorage.getItem('lead_conversion_sent')) {
              gtag('event', 'conversion', {'send_to': 'AW-17575125653/HU6yCL6f0rUbEJXFvLxB'});
              sessionStorage.setItem('lead_conversion_sent', '1');
              console.log("Conversión Lead Enviada.");
          } else {
              console.log("Conversión ya enviada en esta sesión.");
          }

          // Limpiamos la URL para evitar re-conteo
          const newUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
          window.history.replaceState({path: newUrl}, '', newUrl);
      }
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¡Gracias por Contactarnos!</title>
    <!-- Incluimos Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Incluimos Font Awesome para los iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Favicon y touch icon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/logo/goforlifeMexico-logo.png">
    <link rel="apple-touch-icon" href="/logo/goforlifeMexico-logo.png">
    <style>
        /* Usamos una fuente similar a la de tu proyecto */
        body {
            font-family: 'Inter', sans-serif;
        }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
    </style>
</head>
<body class="bg-gray-900 text-white h-full flex items-center justify-center p-6">
    <!-- GTM noscript removido -->

    <div class="bg-gray-800 p-8 md:p-12 rounded-2xl shadow-2xl max-w-lg w-full text-center border border-gray-700">
        
        <div class="text-green-400 mb-6">
            <i class="fas fa-check-circle fa-4x"></i>
        </div>
        
        <h1 class="text-3xl font-bold mb-4">¡Mensaje Enviado!</h1>
        
        <p class="text-lg text-gray-300 mb-8">
            Gracias por tu interés. Hemos recibido tu solicitud de cotización correctamente.
            Un asesor se pondrá en contacto contigo a la brevedad.
        </p>
        
        <div class="text-sm text-gray-400">
            <p>Serás redirigido al inicio en <span id="countdown">5</span> segundos...</p>
        </div>
        
    </div>

    <script>
        let seconds = 5;
        const countdownElement = document.getElementById('countdown');

        const countdownInterval = setInterval(() => {
            seconds--;
            if (countdownElement) {
                countdownElement.textContent = seconds;
            }
            if (seconds <= 0) {
                clearInterval(countdownInterval);
                // Redirigir a la página principal
                window.location.href = '/'; 
            }
        }, 1000);

        // Limpieza adicional si se navegó sin parámetro
        if (!params.get('estado')) {
            sessionStorage.removeItem('lead_conversion_sent');
        }
    </script>

</body>
</html>
